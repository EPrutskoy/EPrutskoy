# Проект: модель предсказания ДТП

Вы — специалист по Data Science в каршеринговой компании. Вам поступил заказ: нужно создать систему, которая могла бы оценить риск ДТП по выбранному маршруту движения. \
Под риском понимается вероятность ДТП с любым повреждением транспортного средства. Как только водитель забронировал автомобиль, сел за руль и выбрал маршрут, система должна оценить уровень риска. \
Если уровень риска высок, водитель увидит предупреждение и рекомендации по маршруту.\

Идея создания такой системы находится в стадии предварительного обсуждения и проработки. 
Чёткого алгоритма работы и подобных решений на рынке ещё не существует.\
Текущая задача — понять, возможно ли предсказывать ДТП, опираясь на исторические данные одного из регионов.

## Идея решения задачи от заказчика

1. Создать модель предсказания ДТП (целевое значение — at_fault (виновник) в таблице `parties`).
2. Для модели выбрать тип виновника — только машина (car).
3. Выбрать случаи, когда ДТП привело к любым повреждениям транспортного средства, кроме типа SCRATCH (царапина).
4. Для моделирования ограничиться данными за 2012 год — они самые свежие.
5. Обязательное условие — учесть фактор возраста автомобиля.

На основе модели исследовать основные факторы ДТП. Понять, помогут ли результаты моделирования и анализ важности факторов ответить на вопросы:

- Возможно ли создать адекватную систему оценки водительского риска при выдаче авто?
- Какие ещё факторы нужно учесть?
- Нужно ли оборудовать автомобиль какими-либо датчиками или камерой?

Заказчик предлагает вам поработать с базой данных по происшествиям и сформировать свои идеи создания такой системы.

## Описание таблиц данных

Таблица: `case_ids`
* **case_id**  - (индексы происшествий)
* **db_year** - дата регистрации проишествия


Таблица: `collisions` (информация о происшествиях)
* **CASE_ID**  - Идентификационный  Номер в базе данных 
Уникальный номер для зарегистрированного происшествия в таблице происшествий.

* **COLLISION_DATE** - Дата происшествия. Формат год/месяц/день

* **COLLISION_TIME** - Время происшествия. Формат: 24-часовой

* **INTERSECTION** - Является ли место происшествие перекрестком    
   * Y — Intersection (перекрёсток)
   * N — Not Intersection (не перекрёсток)
   * - — Not stated (Не указано)

* **WEATHER_1**  - Погода    
   * A — Clear (Ясно)
   * B — Cloudy (Облачно)
   * C — Raining (Дождь)
   * D — Snowing (Снегопад)
   * E — Fog (Туман)
   * F — Other (Другое)
   * G — Wind (Ветер)
   * - — Not Stated (Не указано)

* **COLLISION_DAMAGE** - Серьёзность происшествия    
   * 1 — FATAL ТС (Не подлежит восстановлению)
   * 2 — SEVERE DAMAGE (Серьёзный ремонт, большая часть под замену/Серьёзное повреждение капитального строения)
   * 3 — MIDDLE DAMAGE (Средний ремонт, машина в целом на ходу/Строение в целом устояло)
   * 4 — SMALL DAMAGE (Отдельный элемент кузова под замену/покраску)
   * 0 – SCRATCH (Царапина)

* **PRIMARY_COLL_FACTOR** - Основной фактор аварии    
   * A — Code Violation (Нарушение правил ПДД)
   * B — Other Improper Driving (Другое неправильное вождение)
   * C — Other Than Driver (Кроме водителя)
   * D — Unknown (Неизвестно)
   * E — Fell Asleep (Заснул)
   * - — Not Stated (Не указано)

* **ROAD_SURFACE** - Состояние дороги    
   * A — Dry (Сухая)
   * B — Wet (Мокрая)
   * C — Snowy or Icy (Заснеженная или обледенелая)
   * D — Slippery (Muddy, Oily, etc.) (Скользкая, грязная, маслянистая и т. д.)
   * - — Not Stated (Не указано)

* **LIGHTING** - Освещение    
   * A — Daylight (Дневной свет)
   * B — Dusk-Dawn (Сумерки-Рассвет)
   * C — Dark-Street Lights (Темно-Уличные фонари)
   * D — Dark-No Street Lights (Темно-Нет уличных фонарей)
   * E — Dark-Street Lights Not Functioning (Темно-Уличные фонари не работают)
   * - — Not Stated (Не указано)

* **COUNTY_CITY_LOCATION** - Номер географических районов, где произошло ДТП  число

* **COUNTY_LOCATION** - Названия географических районов, где произошло ДТП    список разных названий, категориальный тип данных

* **DIRECTION** - Направление движения    
   * N — North (Север)
   * E — East (Восток)
   * S — South (Юг)
   * W — West (Запад)
   * - or blank — Not State (Не указано)
   * на перекрёстке

* **DISTANCE** - Расстояние от главной дороги (метры), число

* **LOCATION_TYPE** - Тип дороги    
   * H — Highway (Шоссе)
   * I — Intersection (Перекрёсток)
   * R — Ramp (or Collector) (Рампа)
   * - or blank — Not State Highway (Не указано)

* **PARTY_COUNT** - Количество участников, число

* **PCF_VIOLATION_CATEGORY** - Категория нарушения    
   * 01 — Driving or Bicycling Under the Influence of Alcohol or Drug (Вождение или езда на велосипеде в состоянии алкогольного или наркотического опьянения)
   * 02 — Impeding Traffic (Препятствие движению транспорта)
   * 03 — Unsafe Speed (Превышение скорости)
   * 04 — Following Too Closely (Опасное сближение)
   * 05 — Wrong Side of Road (Неправильная сторона дороги)
   * 06 — Improper Passing (Неправильное движение)
   * 07 — Unsafe Lane Change (Небезопасная смена полосы движения)
   * 08 — Improper Turning (Неправильный поворот)
   * 09 — Automobile Right of Way (Автомобильное право проезда)
   * 10 — Pedestrian Right of Way (Пешеходное право проезда)
   * 11 — Pedestrian Violation (Нарушение пешеходами)
   * 12 — Traffic Signals and Signs (Дорожные сигналы и знаки)
   * 13 — Hazardous Parking (Неправильная парковка)
   * 14 — Lights (Освещение)
   * 15 — Brakes (Тормоза)
   * 16 — Other Equipment (Другое оборудование)
   * 17 — Other Hazardous Violation (Другие нарушения)
   * 18 — Other Than Driver (or Pedestrian) (Кроме водителя или пешехода)
   * 19 — Speeding (Скорость)
   * 20 — Pedestrian dui (Нарушение пешехода)
   * 21 — Unsafe Starting or Backing (Опасный старт)
   * 22 — Other Improper Driving (Другое неправильное вождение)
   * 23 — Pedestrian or “Other” Under the Influence of Alcohol or Drug (Пешеход или «Другой» в состоянии алкогольного или наркотического опьянения)
   * 24 — Fell Asleep (Заснул)
   * 00 — Unknown (Неизвестно)
   * - — Not Stated (Не указано)

* **TYPE_OF_COLLISION** - Тип аварии    
   * A — Head-On (Лоб в лоб)
   * B — Sideswipe (Сторона)
   * C — Rear End (Столкновение задней частью)
   * D — Broadside (Боковой удар)
   * E — Hit Object (Удар объекта)
   * F — Overturned (Опрокинутый)
   * G — Vehicle (транспортное средство/ Пешеход)
   * H — Other (Другое)
   * - — Not Stated (Не указано)

*  **MOTOR_VEHICLE_INVOLVED_WITH** - Дополнительные участники ДТП    
   * Other motor vehicle (Другой автомобиль)
   * Fixed object (Неподвижный объект)
   * Parked motor vehicle (Припаркованный автомобиль)
   * Pedestrian (Пешеход)
   * Bicycle (Велосипедист)
   * Non-collision (Не столкновение)
   * Other object (Другой объект)
   * Motor vehicle on other roadway (Автомобиль на другой проезжей)
   * Animal (Животное)
   * Train (Поезд)

* **ROAD_CONDITION_1** - Дорожное состояние    
   * A — Holes, Deep Ruts (Ямы, глубокая колея)
   * B — Loose Material on Roadway (Сыпучий материал на проезжей части)
   * C — Obstruction on Roadway (Препятствие на проезжей части)
   * D — Construction or Repair Zone (Зона строительства или ремонта)
   * E — Reduced Roadway Width (Уменьшенная ширина проезжей части)
   * F — Flooded (Затоплено)
   * G — Other (Другое)
   * H — No Unusual Condition (Нет ничего необычного)
   * - — Not Stated (Не указано)

* **CONTROL_CONDITION_1** - Устройство управления    
   * A — Functioning (Функционирует)
   * B — Not Functioning (Не функционирует)
   * C — Obscured (Затемнённый)
   * D — None (Нет)
   * - — Not Stated (Не указано)

Таблица: `parties`
- **CASE_ID** - Идентификационный номер в базе данных - Уникальный номер для зарегистрированного происшествия в таблице происшествий.

- **PARTY_NUMBER** - Номер участника происшествия - От 1 до N — по числу участников происшествия.

- **PARTY_TYPE** - Тип участника происшествия - 
  - 1 — Car (Авто)/
  - 2 — Road bumper (Дорожные знаки)/
  - 3 — Building (Строения)
  - 4 — Road signs (Отбойник)
  - 5 — Other (Другое)
  - 6 — Operator (Оператор)
  - - — Not Stated (Не указано)

- **AT_FAULT** - Виновность участника - 0/1.

- **INSURANCE_PREMIUM** - Сумма страховки (тыс. $) - число.

- **PARTY_DRUG_PHYSICAL** - Состояние участника: физическое или с учётом принятых лекарств - 
  - E — Under Drug Influence (Под воздействием лекарств)
  - F — Impairment — Physical (Ухудшение состояния)
  - G — Impairment Unknown (Не известно)
  - H — Not Applicable (Не оценивался)
  - I — Sleepy/Fatigued (Сонный/Усталый)
  - - — Not Stated (Не указано)
- **PARTY_SOBRIETY** - Трезвость участника - 
  - A — Had Not Been Drinking (Не пил)
  - B — Had Been Drinking, Under Influence (Был пьян, под влиянием)
  - C — Had Been Drinking, Not Under Influence (Был пьян, не под влиянием)
  - D — Had Been Drinking, Impairment Unknown (Был пьян, ухудшение неизвестно)
  - G — Impairment Unknown (Неизвестно ухудшение)
  - H — Not Applicable (Не оценивался)
  - - — Not Stated (Не указано)

- **CELLPHONE_IN_USE** - Наличие телефона в автомобиле (возможности разговаривать по громкой связи) - 0/1.

Таблица: `vehicles`
- **ID** - Индекс текущей таблицы - Номер в таблице.

- **CASE_ID** - Идентификационный номер в базе данных - Уникальный номер для зарегистрированного происшествия в таблице происшествий.

- **VEHICLE_TYPE** - Тип кузова - 
  - MINIVAN
  - COUPE
  - SEDAN
  - HATCHBACK
  - OTHER

- **VEHICLE_TRANSMISSION** - Тип КПП - 
  - auto (Автоматическая)
  - manual (Ручная)
  - - — Not Stated (Не указано)

- **VEHICLE_AGE** - Возраст автомобиля (в годах) - число.